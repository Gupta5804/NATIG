def build(bld):
    # Build the HELICS module without any additional examples
    module = bld.create_ns3_module('helics', ['core', 'network', 'internet'])
    module.source = [
        'model/helics-application.cc',
        'model/helics-static-source-application.cc',
        'model/helics-static-sink-application.cc',
        'model/helics-filter-application.cc',
        'model/helics-id-tag.cc',
        'model/helics-simulator-impl.cc',
        'helper/helics-helper.cc',
    ]
    # Link against the installed HELICS library
    module.env.append_value('LIB', 'helics')
    # Tell the linker where to find libhelics
    module.env.append_value('LIBPATH', ['/usr/local/lib'])

    headers = bld(features='ns3header')
    headers.module = 'helics'
    headers.source = [
        'model/helics-application.h',
        'model/helics-static-source-application.h',
        'model/helics-static-sink-application.h',
        'model/helics-filter-application.h',
        'model/helics-id-tag.h',
        'model/helics-simulator-impl.h',
        'helper/helics-helper.h',
    ]

