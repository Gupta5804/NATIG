def build(bld):
    # Define our new, clean 'modbus' module.
    # It correctly depends on the necessary ns-3 modules and 'helics'.
    module = bld.create_ns3_module('modbus', ['core', 'network', 'internet', 'point-to-point', 'helics'])

    # List only the source files for your custom Modbus applications.
    module.source = [
        'model/modbus-master-app.cc',
        'model/modbus-slave-app.cc',
        'helper/modbus-helper.cc',
    ]

    # Define the headers that other parts of the simulation can include.
    module.headers = bld.CPPPATH_ST % [
        'model/modbus-master-app.h',
        'model/modbus-slave-app.h',
        'helper/modbus-helper.h',
    ]

